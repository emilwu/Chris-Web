## 1. 背景與目標
- **現況**：Hwayo 公司目前採用紙本檢驗流程，客戶提供樣本申請檢驗之後，會有檢驗工單，由研究員依照工單對樣本進行檢驗，之後由研究員依照檢驗結果填寫手寫報表，再由主管與審核人員再進行人工審核，最後送交客戶。
- **目標**：透過線上化與標準化流程，提升效率、減少錯誤、節省耗材，同時保留人工審核機制以確保報告品質，並希望透過流程的線上化來將資料集中管理並改用資料庫紀錄檢驗的產出。

## 2. 系統用戶與角色
| 角色   | 職責                   |
| ---- | -------------------- |
| 研究員  | 上傳實驗數據、填寫報告草稿        |
| 審核人員 | 瀏覽草稿、確認數據與格式、簽核並發送客戶 |
| 管理員  | 帳號管理、權限設定、流程與報告格式維護  |
| 客戶   | 線上接收與下載最終報告          |

## 3. 第一階段核心功能模組
1. **用戶認證與權限管理**
   - OAuth2 或 SSO 登入
   - 依角色分配不同權限

2. **實驗數據輸入介面**
   - 自訂欄位表單 (結合動態欄位設定)
   - 支援多種數據格式 (數值、文字、圖表上傳)

3. **流程引擎 (Workflow Engine)**
   - 任務分派：自動將研究員提交的報告草稿通知審核人員
   - 狀態管理：草稿／審核中／已核准／已退回

4. **報告產生器**
   - 樣板引擎
   - 自動套用公司企業識別與各種事先定義好的排版格式
   - 支援匯出 PDF、Word(docx)

5. **審核與簽核系統**
   - 意見註記：審核者可添加編輯建議
   - 差異檢查：比對原始數據與報表內容
   - 通過簽核的簽核紀錄與時間戳記

6. **通知與提醒**
   - Email、即時訊息(SMS)通知，後期可以考慮 Line, Teams, Slack 等方式
   - 到期提醒與逾期追蹤

7. **客戶入口**
   - 安全連結或專屬帳號
   - 報告下載與歷史查詢

8. **審計與日誌**
   - 操作紀錄 (誰在何時做了什麼動作)
   - 報表版本管理

## 4. 第二階段：客戶送件線上化
- **需求表單**：客戶可透過線上表單提交檢驗需求，包括項目、預計採樣時間、特殊說明等。
- **FedEx 樣本取件**：
  - 與 FedEx API 整合，自動產生取件單號與包裹標籤。
  - 客戶確認後，FedEx 到指定地址收件。

- **樣本收件狀態**：
  - 系統接收 FedEx 追蹤回報，自動更新「已取件」、「運送中」、「已到實驗室」等狀態。
  - 在平台上顯示給客戶，並發送 Email/SMS 通知。

- **進度追蹤**：
  - 客戶在個人 Portal 查看完整檢驗流程進度：收件→數據輸入→審核→報告生成。
  - 每個階段具體時間戳與負責人資訊。

## 8. 第三階段：AI 智能化定價與檢驗建議
- **AI 報價建議**：透過機器學習模型分析過往報價單與檢驗報告結果，考量成本、歷史價格與市場通膨率，提供最佳報價建議。
  - 訓練資料：過往報價單、報告結果、原物料成本指數。
  - 調整機制：定期自動更新通膨調整係數（可接入政府消費者物價指數 API）。

- **檢驗方式推薦**：收到客戶需求後，自動解析成分關鍵字，並於平台中查詢並整理各國藥典標準檢驗方法與相關資料，提供給研究員參考。
  - 整合藥典 API：USP、EP、JP、ChP 等藥典。
  - 關鍵字匹配：成分名稱、CAS 號、檢測項目。
  - 推薦結果：檢驗儀器、方法步驟、參考文獻連結。

## 9. 未來擴充
- 機器學習輔助審核（異常值檢測）
- 多語系報告支援
- 手機端原生 App